---
import BaseLayout from '../../layouts/BaseLayout.astro';
---
<BaseLayout title="第一章：思考の鋳造 - 自己進化プログラム">

    <Fragment slot="head">
        <style>
            /* --- 既存の章ナビゲーションのスタイル --- */
            .chapter-nav {
                display: flex;
                justify-content: center;
                gap: 0.5rem;
                margin-bottom: 2rem;
            }
            .chapter-nav a {
                padding: 0.5rem 1rem;
                text-decoration: none;
                color: var(--color-text-sub);
                border-radius: 6px;
                transition: all 0.2s ease;
            }
            .chapter-nav a:hover {
                background-color: var(--color-content-bg);
                color: var(--color-text-main);
            }
            .chapter-nav a.active {
                background-color: var(--color-accent-secondary);
                color: #fff;
                font-weight: 600;
            }

            /* --- 新しいタブUIの法典 --- */
            .emaki-tabs {
                display: flex;
                border-bottom: 1px solid var(--color-border);
                margin-bottom: 2rem;
            }
            .emaki-tab {
                padding: 0.75rem 1.5rem;
                cursor: pointer;
                color: var(--color-text-sub);
                border-bottom: 2px solid transparent;
                transition: all 0.3s ease;
                font-weight: 600;
            }
            .emaki-tab:hover {
                color: var(--color-text-main);
            }
            .emaki-tab.is-active {
                color: var(--color-accent-primary);
                border-bottom-color: var(--color-accent-primary);
            }
            .emaki-pane {
                display: none; /* 初期状態では、BとCは隠されている */
            }
            .emaki-pane.is-active {
                display: block; /* 選ばれし魂のみが、姿を現す */
            }

            /* --- 前後の章への扉のスタイル --- */
            .chapter-links {
                display: flex;
                justify-content: space-between;
                margin-top: 3rem;
                padding-top: 2rem;
                border-top: 1px solid var(--color-border);
            }
        </style>
    </Fragment>

    <div class="content-wrapper">
        <nav class="chapter-nav">
            <a href="/program/chapter-00">序章</a>
            <a href="/program/chapter-01" class="active">一章</a>
            <a href="/program/chapter-02">二章</a>
            <a href="/program/chapter-03">三章</a>
            <a href="/program/chapter-04">四章</a>
        </nav>

        <h1 class="page-title mb-8">第一章：思考の鋳造</h1>

        <nav class="emaki-tabs">
            <div class="emaki-tab is-active" data-target="part-A">【思想】</div>
            <div class="emaki-tab" data-target="part-B">【知識】</div>
            <div class="emaki-tab" data-target="part-C">【実践】</div>
        </nav>

        <div class="emaki-content">
            <div id="part-A" class="emaki-pane is-active prose">
                <h2>Aパート：物語</h2>
                <p>ここに、第一章の**物語パート**のテキストが入ります。</p>
            </div>

            <div id="part-B" class="emaki-pane prose">
                <h2>Bパート：人間的スキル</h2>
                <p>ここに、第一章の**人間的スキルパート**のテキストが入ります。</p>
            </div>

            <div id="part-C" class="emaki-pane prose">
                <h2>Cパート：実践</h2>
                <p>ここに、第一章の**実践パート**のテキストが入ります。</p>
            </div>
        </div>
        <div class="chapter-links">
            <a href="/program/chapter-00" class="btn">&larr; 序章へ戻る</a>
            <a href="/program/chapter-02" class="btn btn-primary">第二章へ進む &rarr;</a>
        </div>
    </div>

    <script is:inline>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.emaki-tab');
            const panes = document.querySelectorAll('.emaki-pane');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 全ての光を一旦消す
                    tabs.forEach(t => t.classList.remove('is-active'));
                    panes.forEach(p => p.classList.remove('is-active'));
                    
                    // 選ばれし者に、光を灯す
                    tab.classList.add('is-active');
                    const targetId = tab.dataset.target;
                    const targetPane = document.getElementById(targetId);
                    if (targetPane) {
                        targetPane.classList.add('is-active');
                    }
                });
            });
        });
    </script>
</BaseLayout>